<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Math Drills</title>
  <style>
    :root {
      --blue: #3b82f6;
      --blue-d: #2563eb;
      --bg: #f8fafc;
      --good: #0ea34b;
      --bad: #dc2626;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; padding: 2rem;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg); color: #0f172a;
      display: flex; flex-direction: column; align-items: center;
    }
    h1 { margin: 0 0 1rem; }
    #menu { width: 100%; max-width: 820px; }
    #menu h2 { text-align: center; margin: 0 0 .75rem; }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: .6rem;
    }
    .grid button, #next, #back {
      border: 0; border-radius: 10px;
      padding: .7rem 1rem; cursor: pointer;
      background: var(--blue); color: #fff; font-weight: 600;
      box-shadow: 0 4px 14px rgba(0,0,0,.08);
    }
    .grid button:hover, #next:hover, #back:hover { background: var(--blue-d); }
    #quiz { width: 100%; max-width: 520px; text-align: center; }
    #question { font-size: 1.8rem; margin: 1rem 0; }
    #answer {
      width: 220px; padding: .6rem .75rem; font-size: 1.2rem; text-align: center;
      border: 2px solid #cbd5e1; border-radius: 10px; background: #fff;
    }
    #answer:disabled { background: #e2e8f0; }
    #feedback { min-height: 1.6rem; margin: .75rem 0 0; font-size: 1.2rem; }
    .correct { color: var(--good); }
    .wrong { color: var(--bad); }
    .row { display: flex; gap: .5rem; justify-content: center; margin-top: 1rem; }
    .visually-hidden { position: absolute; left: -9999px; }
  </style>
</head>
<body>
  <h1>Math Drills</h1>

  <div id="menu">
    <h2>Choose a drill</h2>
    <div class="grid">
      <button data-drill="mult12">12 × (1–15)</button>
      <button data-drill="mult10">Multiplication 1–10</button>
      <button data-drill="mult15">Multiplication 1–15</button>
      <button data-drill="add2">Two-digit addition</button>
      <button data-drill="squares">Perfect squares</button>
      <button data-drill="cubes">Perfect cubes</button>
      <button data-drill="roots">√2, √3, √5 (3 decimals)</button>
      <button data-drill="exp2">Powers of 2 (1–10)</button>
      <button data-drill="exp3">Powers of 3 (1–5)</button>
      <button data-drill="exp4">Powers of 4 (1–5)</button>
      <button data-drill="exp5">Powers of 5 (1–5)</button>
      <button data-drill="decimals">Fractions → decimals</button>
    </div>
  </div>

  <div id="quiz" hidden>
    <div id="question"></div>
    <label for="answer" class="visually-hidden">Answer</label>
    <input id="answer" type="text" inputmode="decimal" autocomplete="off" />
    <div id="feedback" aria-live="polite"></div>
    <div class="row">
      <button id="next" hidden>Next</button>
      <button id="back">Back</button>
    </div>
  </div>

  <script>
    // Helpers
    const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;

    // Fractions for decimal drills
    const FRACTIONS = [];
    for (let i = 1; i < 5; i++) FRACTIONS.push([i, 5]);   // 1/5..4/5
    for (let i = 1; i < 6; i++) FRACTIONS.push([i, 6]);   // 1/6..5/6
    for (let i = 1; i < 7; i++) FRACTIONS.push([i, 7]);   // 1/7..6/7
    for (let i = 1; i < 8; i++) FRACTIONS.push([i, 8]);   // 1/8..7/8
    [[1,9],[1,11],[1,12],[1,16],[1,32]].forEach(f => FRACTIONS.push(f));

    // Drill generators
    const drills = {
      mult12() { const b = rand(1,15); return { text: `12 × ${b}`, ans: 12*b, type: 'int' }; },
      mult10() { const a = rand(1,10), b = rand(1,10); return { text: `${a} × ${b}`, ans: a*b, type: 'int' }; },
      mult15() { const a = rand(1,15), b = rand(1,15); return { text: `${a} × ${b}`, ans: a*b, type: 'int' }; },
      add2()   { const a = rand(10,99), b = rand(10,99); return { text: `${a} + ${b}`, ans: a+b, type: 'int' }; },
      squares(){ const n = rand(1,20); return { text: `${n}²`, ans: n*n, type: 'int' }; },
      cubes()  { const n = rand(1,10); return { text: `${n}³`, ans: n*n*n, type: 'int' }; },
      roots()  { const r = [2,3,5][rand(0,2)]; const v = Math.sqrt(r);
                 return { text: `√${r} ≈ (3 decimals)`, ans: parseFloat(v.toFixed(3)), type: 'float' }; },
      exp2()   { const e = rand(1,10); return { text: `2^${e}`, ans: 2**e, type: 'int' }; },
      exp3()   { const e = rand(1,5);  return { text: `3^${e}`, ans: 3**e, type: 'int' }; },
      exp4()   { const e = rand(1,5);  return { text: `4^${e}`, ans: 4**e, type: 'int' }; },
      exp5()   { const e = rand(1,5);  return { text: `5^${e}`, ans: 5**e, type: 'int' }; },
      decimals(){ const [n,d] = FRACTIONS[rand(0, FRACTIONS.length-1)];
                  const v = n/d; return { text: `${n}/${d} ≈ (3 decimals)`, ans: parseFloat(v.toFixed(3)), type: 'float' }; },
    };

    // Elements
    const menu   = document.getElementById('menu');
    const quiz   = document.getElementById('quiz');
    const qEl    = document.getElementById('question');
    const aEl    = document.getElementById('answer');
    const fb     = document.getElementById('feedback');
    const next   = document.getElementById('next');
    const back   = document.getElementById('back');

    let currentDrill = null, currentQ = null, checked = false;

    // Menu buttons
    document.querySelectorAll('#menu [data-drill]').forEach(btn => {
      btn.addEventListener('click', () => {
        currentDrill = drills[btn.dataset.drill];
        startDrill();
      });
    });

    function startDrill() {
      menu.hidden = true;
      quiz.hidden = false;
      ask();
    }

    function ask() {
      currentQ = currentDrill();
      qEl.textContent = currentQ.text;
      aEl.value = '';
      aEl.disabled = false;
      fb.textContent = '';
      fb.className = '';
      next.hidden = true;
      checked = false;
      aEl.focus();
    }

    function check() {
      const raw = aEl.value.trim();
      if (!raw) return;

      let ok = false;
      if (currentQ.type === 'float') {
        const user = parseFloat(raw);
        if (!Number.isNaN(user) && Math.abs(user - currentQ.ans) < 0.01) ok = true;
      } else {
        const user = parseInt(raw, 10);
        if (!Number.isNaN(user) && user === currentQ.ans) ok = true;
      }

      if (ok) {
        fb.textContent = '✅ Correct!';
        fb.className = 'correct';
      } else {
        const show = currentQ.type === 'float' ? currentQ.ans.toFixed(3) : String(currentQ.ans);
        fb.textContent = `❌ Incorrect (Answer: ${show})`;
        fb.className = 'wrong';
      }
      aEl.disabled = true;
      next.hidden = false;
      checked = true;
    }

    // Enter checks; after feedback, Enter again moves to next
    aEl.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        if (!checked) check();
        else ask();
      }
    });

    next.addEventListener('click', ask);
    back.addEventListener('click', () => {
      quiz.hidden = true;
      menu.hidden = false;
      currentDrill = null; currentQ = null; checked = false;
    });
  </script>
</body>
</html>
